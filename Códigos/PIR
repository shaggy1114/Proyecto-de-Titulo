/*
  Código para Sensor de Movimiento (PIR) y LED
  Placa: Arduino Mega 2560
  
  Descripción:
  - Lee un sensor PIR en el pin 39.
  - Si detecta movimiento (pin 39 en HIGH), enciende un LED en el pin 41.
  - Si no hay movimiento (pin 39 en LOW), apaga el LED.

  Conexiones:
  - Sensor PIR VCC -> 5V (Arduino)
  - Sensor PIR GND -> GND (Arduino)
  - Sensor PIR OUT (Señal) -> Pin 39 (Arduino)
  
  - LED Ánodo (+) (pata larga) -> Resistencia (220 ohm) -> Pin 41 (Arduino)
  - LED Cátodo (-) (pata corta) -> GND (Arduino)
*/

// --- Definición de Pines ---
const int pinPIR = 39;
const int pinLED = 41;

// --- Variables Globales ---
int estadoPIR = LOW; // Variable para guardar el estado del sensor

void setup() {
  // Configurar los pines
  pinMode(pinPIR, INPUT);  // El sensor PIR es una entrada
  pinMode(pinLED, OUTPUT); // El LED es una salida
  
  digitalWrite(pinLED, LOW); // Asegurarse que el LED empiece apagado

  // Iniciar el monitor serial para depuración
  Serial.begin(9600);
  Serial.println("Iniciando sensor PIR...");

  // --- Calibración del Sensor ---
  // Los sensores PIR necesitan un tiempo (aprox. 30-60 seg) 
  // para calibrarse al encenderse.
  Serial.println("Calibrando sensor (30 segundos)...");
  for(int i = 0; i < 30; i++){
    Serial.print(".");
    delay(1000);
  }
  Serial.println("\n¡Sensor PIR listo y calibrado!");
}

void loop() {
  // --- Leer el sensor ---
  estadoPIR = digitalRead(pinPIR);

  // --- Lógica de control ---
  if (estadoPIR == HIGH) {
    // Si se detecta movimiento...
    digitalWrite(pinLED, HIGH); // Encender el LED
    Serial.println("¡Movimiento detectado!");
  } else {
    // Si no se detecta movimiento...
    digitalWrite(pinLED, LOW); // Apagar el LED
    Serial.println("Esperando movimiento...");
  }
  
  // Pequeña pausa para estabilizar la lectura
  // (Los PIR ya tienen su propio retardo, 
  // así que un delay corto aquí es opcional)
  delay(250);
}
